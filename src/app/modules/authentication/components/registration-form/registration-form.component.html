<form [formGroup]="signUpForm" class="w-full flex flex-col registration-form">
  <div class="flex flex-col gap-3">
    <span class="registration-form__text">Электронная почта*</span>
    <mat-form-field appearance="outline">
      <input autocomplete="off" matInput placeholder="Введите адрес электронной почты..." formControlName="email"
      class="form__input"/>
      <mat-error *ngIf="f['email'].invalid && f['email'].touched">
        <span *ngIf="f['email'].errors?.['required']">{{ ERROR_MESSAGES.REQUIRED }}</span>
        <span *ngIf="f['email'].errors?.['email']">{{ ERROR_MESSAGES.INVALID_EMAIL }}</span>
      </mat-error>
    </mat-form-field>
  </div>
  <div class="flex flex-row gap-5 registration__name-field">
    <div class="flex flex-col gap-3 w-1/2 registration__name-container">
      <span class="registration-form__text registration__name">Имя*</span>
      <mat-form-field appearance="outline">
        <input class="form__input" autocomplete="off" matInput placeholder="Введите ваше имя..." formControlName="firstName" trimOnChange />
        <mat-error *ngIf="f['firstName'].invalid && f['firstName'].touched">
          <span *ngIf="f['firstName'].errors?.['required']  || f['firstName'].errors?.['emptyString']">{{
            ERROR_MESSAGES.REQUIRED }}</span>
          <span
            *ngIf="f['firstName'].errors?.['pattern'] && !f['firstName'].errors?.['required'] && !f['firstName'].errors?.['emptyString']">{{
            ERROR_MESSAGES.INVALID_NAME }}</span>
        </mat-error>
      </mat-form-field>
    </div>
    <div class="flex flex-col gap-3 w-1/2 registration__surname-container">
      <span class="registration-form__text registration__surname">Фамилия*</span>
      <mat-form-field appearance="outline">
        <input class="form__input" autocomplete="off" matInput placeholder="Введите вашу фамилию..." formControlName="lastName"
          trimOnChange />
        <mat-error *ngIf="f['lastName'].invalid && f['lastName'].touched">
          <span *ngIf="f['lastName'].errors?.['required'] || f['lastName'].errors?.['emptyString']">{{
            ERROR_MESSAGES.REQUIRED }}</span>
          <span
            *ngIf="f['lastName'].errors?.['pattern'] && !f['lastName'].errors?.['required'] && !f['lastName'].errors?.['emptyString']">{{
            ERROR_MESSAGES.INVALID_NAME }}</span>
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div class="flex flex-col gap-3">
    <span class="registration-form__text">Выбор валюты*</span>
    <mat-form-field appearance="outline">
      <mat-select [value]="currencies[3]">
        <mat-option *ngFor="let currency of currencies" [value]="currency" (click)="onSelectCurrency(currency)">({{
          currency.symbol }}) {{ currency.currency }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="flex flex-col gap-6 registration-form__passwords">
    <span class="registration-form__text">Пароль*</span>
    <mat-form-field appearance="outline">
      <input autocomplete="off" matInput [type]="showPassword ? 'text' : 'password'" placeholder="Введите ваш пароль..."
        formControlName="password" class="registration-form__password-input form__input" />
      <mat-error *ngIf="f['password'].invalid && f['password'].touched">
        <span *ngIf="f['password'].errors?.['required']">{{ ERROR_MESSAGES.REQUIRED }}</span>
        <span class="text-sm" *ngIf="f['password'].errors?.['pattern']">
          {{ ERROR_MESSAGES.INVALID_PASSWORD }}
        </span>
      </mat-error>
      <button matSuffix mat-icon-button (click)="showPassword = !showPassword">
        <mat-icon>{{ showPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
      </button>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <input autocomplete="off" matInput [type]="showAdditionalPassword ? 'text' : 'password'"
        placeholder="Повторно введите пароль..." formControlName="confirmPassword"
        class="registration-form__password-input form__input" />
      <mat-error *ngIf="f['confirmPassword'].invalid && f['confirmPassword'].touched">
        <span *ngIf="f['confirmPassword'].errors?.['required']">{{ ERROR_MESSAGES.REQUIRED }}</span>
        <span *ngIf="f['confirmPassword'].errors?.['pattern']">
          {{ ERROR_MESSAGES.INVALID_PASSWORD }}
        </span>
        <span *ngIf="f['confirmPassword'].errors?.['value']">{{ ERROR_MESSAGES.PASSWORDS_MISMATCH }}</span>
      </mat-error>
      <button matSuffix mat-icon-button (click)="showAdditionalPassword = !showAdditionalPassword">
        <mat-icon>{{ showAdditionalPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <div class="flex flex-col gap-1 w-full">
    <p class="registration-form__text">Проверка*</p>
    <div class="recaptcha-container">
      <mat-checkbox class="recaptcha__checkbox" color="#1B9B85" formControlName="recaptcha" (change)="onChangeRecaptcha($event.checked)">
        <span class="registration-form__text">Я не робот</span>
      </mat-checkbox>
    </div>
    <mat-error class="w-full" *ngIf="f['recaptcha'].invalid && f['recaptcha'].touched">
      <span *ngIf="f['recaptcha'].errors?.['required']">{{ ERROR_MESSAGES.REQUIRED }}</span>
    </mat-error>
  </div>

  <div class="w-full m-auto">
    <button type="submit" class="btn-submit cursor-pointer w-full" (click)="onSubmit()"
      [disabled]="signUpForm.invalid || signUpForm.disabled">
      Зарегистрироваться
    </button>
  </div>
</form>
